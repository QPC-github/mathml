<section class="appendix">
   <h2 id="parsing">Parsing MathML</h2>
   <section>
      <h3 id="parsing_wellformed">Use of MathML as Well-Formed
XML</h3>
      <div class="issue" id="update_schema">
         <span class="head">DTD and W3C XML Schema</span>
         <p>DTD and W3C XML Schema need updating to MathML3</p>
      </div>
      <div class="issue" id="relax_schema">
         <span class="head">Relax Schema</span>
         <p>Should we add a (normative?) Relax NG schema.</p>
         <div class="resolution">
            <p>We make it normative</p>
         </div>
      </div>
      <p>A MathML document must be a well-formed XML document using elements in the MathML
namespace as defined by this specification, however it is not required that the document
refer to any specific Document Type Definition (DTD) or schema that specifies MathML. It
is sometimes advantageous </p>
      <p>Note that if no DTD is specified with a DOCTYPE declaration, that entity
references (for example to refer to MathML characters by name) may not be used. The
document should be encoded in an encoding (for example UTF-8) in which all needed
characters may be encoded as character data, or characters may be referenced using numeric
character references, for example &amp;#x222B; rather than &amp;int;</p>
      <p>If a MathML fragment is parsed without a DTD, in other words as a well-formed XML
fragment, it is the responsibility of the processing application to treat the white space
characters occurring outside of token elements as not significant.</p>
      <p>However, in many circumstances, especially while producing or editing MathML, it is
useful to use a language definition to constrain the editing process or to check the
correctness of generated files. The following section, </p>
   </section>
   <section>
      <h3 id="parsing_usingrnc">Using the RelaxNG Schema for Mathml4</h3>
      <p>MathML documents should be validated using the RelaxNG Schema for MathML, either in
  the XML encoding (</p>
      <p>In contrast to DTDs there is no in-document method to associate a RelaxNG schema with
  a document.</p>
      <p>We provide five RelaxNG schema for Mathml4 in five parts:
  </p>
      <ul>
         <li>
            <p>The grammar for full MathML</p>
         </li>
         <li>
            <p>The grammar for elements common to Content and Presentation</p>
         </li>
         <li>
            <p>The grammar for Presentation MathML</p>
         </li>
         <li>
            <p>The grammar for Strict Content MathML</p>
         </li>
         <li>
            <p>The grammar for Content Mathml4</p>
         </li>
      </ul>
      <p>
</p>
      <section>
         <h4 id="parsing_rnc_full">Full MathML</h4>
         <p>The RelaxNG schema for full MathML builds on the schema describing the various parts
  of the language which are given in the following sections. It can be found at </p>
         <pre/>
      </section>
      <section>
         <h4 id="parsing_rnc_common">Elements Common to Presentation and Content MathML</h4>
         <pre/>
      </section>
      <section>
         <h4 id="parsing_rnc_pres">The Grammar for Presentation MathML</h4>
         <pre/>
      </section>
      <section>
         <h4 id="parsing_rnc_strict">The Grammar for Strict Content Mathml4</h4>
         <p>The grammar for Strict Content Mathml4 can be found at </p>
         <pre/>
      </section>
      <section>
         <h4 id="parsing_rnc_content">The Grammar for Content MathML</h4>
         <p>The grammar for Content Mathml4 builds on the grammar for the Strict Content MathML subset, and can be found at </p>
         <pre/>
      </section>
      <section>
         <h4 id="parsing_rnc_module">MathML as a module in a RelaxNG Schema</h4>
         <p>Normally, a MathML expression does not constitute an entire XML document. MathML is
  designed to be used as the mathematics fragment of larger markup languages. In
  particular it is designed to be used as a </p>
         <p>Customizing the Mathml4 schema so that we can restrict the content of
</p>
         <p>
    The Mathml4 schema is organized so that subsetting to one of the sublanguages specified here is easy.
    To include strict content Mathml4 in a schema just include
      </p>
         <p>For details about RelaxNG grammars and modularization see </p>
      </section>
   </section>
   <section>
      <h3 id="parsing_usingdtd">Using the MathML DTD</h3>
      <section>
         <h4 id="interf_validation">Document Validation Issues</h4>
         <p>The use of namespace prefixes creates an issue for DTD validation
of documents embedding MathML.  DTD validation requires knowing the
literal (possibly prefixed) element names used in the document.
However, the Namespaces in XML Recommendation </p>
         <p>The MathML DTD uses the strategy outlined in </p>
      </section>
      <section>
         <h4>Attribute values in the MathML DTD</h4>
         <p>Note that the DTD is far more permissive than the Relax NG schema, many constraints on attribute values may not be enforced using DTD syntax.
For example, many attributes expect numerical values or specific micro-syntax, but are declared as CDATA (arbitrary string) in the DTD.
However, lack of enforcement of a requirement in the DTD
does </p>
         <p>Furthermore, the MathML DTD is provided for convenience; although it is
intended to be fully compatible with the text of the specification, the
text should be taken as definitive if there is a contradiction.  (Any
contradictions which may exist between various chapters of the text should
be resolved by favoring </p>
      </section>
      <section>
         <h4 id="parsing_doctype">DOCTYPE declaration for MathML</h4>
         <p>MathML documents should be validated using the XML DTD for
MathML,
</p>
         <p>Documents using this DTD should contain a DOCTYPE declaration
of the form:
</p>
      </section>
   </section>
   <section>
      <h3 id="parsing_usingxsd">Using the MathML XML Schema</h3>
      <p>MathML fragments can be validated using the XML Schema for MathML,
located at </p>
      <section>
         <h4 id="parsing_schemalocation">Associating the MathML schema with MathML fragments</h4>
         <p>Similarly to the DOCTYPE declaration used in documents, it is possible to link a MathML fragment to the XML Schema, as shown below.</p>
         <pre class="mathml-fragment">&lt;mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://www.w3.org/1998/Math/MathML
            http://www.w3.org/Math/XMLSchema/mathml4/mathml4.xsd"&gt;
...
&lt;/mml:math&gt;</pre>
         <p>The </p>
         <p>As the XML Schema specification indicates, the use of the
</p>
      </section>
   </section>
   <section>
      <h3 id="parsing_mml_xhtml">Parsing MathML in XHTML</h3>
      <p>As noted in </p>
   </section>
   <section>
      <h3 id="parsing_mml_html">Parsing MathML in HTML</h3>
      <p>See </p>
   </section>
</section>
