<section>
   <h2 id="chars">Characters, Entities and Fonts</h2>
   <section>
      <h3 id="chars_intro">Introduction</h3>
      <div class="issue" id="regenerate_character_and_entity_tables">
         <span class="head">Character and entity tables need to be updated for MathML3 and ISO 9573-13</span>
         <p>Many of the tables in chapter 6 need to be updated and regenerated.
       In this draft references to tables in chapter 6 link to the
    published MathML2 Recommendation, and are marked [MathML2]</p>
         <div class="resolution">
            <p>Separate xml-entity-names WD</p>
         </div>
      </div>
      <p>
Notation and symbols have proved very important for
mathematics. Mathematics has grown in part because 
</p>
      <p>The W3C Math Working Group therefore took on the job
of specifying part of the mechanism needed to proceed from
notation to final presentation, and has collaborated with the
</p>
      <p>This chapter contains discussion of
characters for use within MathML, recommendations for their use,
and warnings concerning the correct form of the
corresponding code points given in the Universal Multiple-Octet Coded Character
Set (UCS) </p>
      <p>While a long process of review and adoption by UTC and ISO/IEC
of the characters of special interest to mathematics and MathML is
now complete, more characters may be added in the future. For the latest 
character tables and font information,
see the </p>
      <p>
A MathML token element (see </p>
   </section>
   <section>
      <h3 id="chars_unicodechars">Unicode Character Data</h3>
      <p>
Any character allowed by XML may be used in MathML.  More precisely,
the legal Unicode characters have the hexadecimal code
numbers 09 (tab = U+0009), 0A (line feed = U+000A), 0D (carriage
return = U+000D), 20-D7FF (U+0020..U+D7FF), E000-FFFD
(U+E000..U+FFFD), and 10000-10FFFF (U+10000..U+10FFFF).  
The exclusions above code number D7FF are of the blocks used
in surrogate pairs, and the two characters guaranteed not to be
Unicode characters at all.  U+FFFE is excluded to allow determination
of byte order in certain encodings.
</p>
      <p>
There are essentially three different ways of encoding character data
in an XML document.

</p>
      <ul>
         <li>
            <p>Using characters directly: For example, the '&#xe9;' (character U+00E9 [LATIN SMALL LETTER E WITH ACUTE]) may have been inserted.  
  This option is only useful
  if the character encoding specified for the XML document includes
  the character intended.  Note that if the document is, for example, 
  encoded in
  Latin-1 (ISO-8859-1) then </p>
         </li>
         <li>
            <p>
Using numeric XML character references: For example, '&#xe9;' may be
represented as &amp;</p>
         </li>
         <li>
            <p>
Using entity references: The MathML DTD defines internal entities that
expand to character data. Thus for example the entity reference
&amp;eacute; may be used rather than the character reference
&amp;#xE9;. An XML fragment that uses an entity
reference which is not defined in a DTD is not well-formed; therefore
it will be rejected by an XML parser. For this reason
every fragment using entity references must
use a DOCTYPE declaration which specifies the MathML DTD, or a DTD
that at least declares any entity reference used in the MathML
instance.  The need to use a DOCTYPE complicates inclusion of MathML in
some documents. However, entity references can be useful for small
illustrative examples.
</p>
         </li>
      </ul>
      <p>
</p>
   </section>
   <section>
      <h3 id="chars_entities">Entity Declarations</h3>
      <p>Earlier versions of this MathML specification included detailed
listings of the entity definitions to be used with the MathML DTD.
These entity definitions are of more general use, and have now been
separated into an ancillary document, XML Entity Definitions for
Characters </p>
   </section>
   <section>
      <h3 id="chars_mglyph">Special Characters Not in Unicode</h3>
      <p>
For special purposes, one may need a symbol which does not have a
Unicode representation. 
In these cases one may use the </p>
   </section>
   <section>
      <h3 id="chars_BMP-SMP">Mathematical Alphanumeric Symbols</h3>
      <p>
In mathematical and scientific writing, single letters often denote 
variables and constants in a given context.  The increasing complexity 
of science has led to the use of
certain common alphabet and font variations to provide enough special
symbols of this letter-like type.  These denotations are generally 
</p>
      <p>
The </p>
      <p>
As discussed in </p>
      <p>
In principle, any mathvariant value may be used with any character
data to define a specific symbolic token.  In practice, only certain
combinations of character data and mathvariant values will be visually
distinguished by a given renderer.
In this section we explain the correspondence between certain characters
in Plane 0 that, when modified by the </p>
      <p>
The mathematical alphanumeric symbol characters in Plane 1 include
alphabets for Latin upper-case and lower-case letters, including
dotless i and j, Greek upper-case and lower-case letters, Greek symbols
(also known as variants), including upper-case and lower-case digamma,
and Latin digits.  These alphabets provide Plane 1 Unicode code points
that differ from corresponding Plane 0 characters only by a variation
in font that carries mathematical semantics when used in a formula.
</p>
      <p>
The </p>
      <p>
An important use of the mathematical alphanumeric symbols in Plane 1
is for identifiers normally printed in special mathematical fonts,
such as Fraktur, Greek, Boldface, or Script.  As another example,
the Mathematical Fraktur alphabet runs from U+1D504 ("A") to U+1D537 ("z").
Thus, an identifier for a variable that uses Fraktur characters could
be marked up as
</p>
      <p>
A MathML processor must treat a mathematical alphanumeric character
(when it appears) as identical to the corresponding combination of
the unstyled character and mathvariant attribute value.
It is important to note that the mathvariant attribute specifies a
semantic class of characters, each of which has a specific appearance
that should be protected from document-wide style changes, so the
intended meaning of the character may be preserved.  The use of a
mathematical alphanumeric character is also intended to preserve
this specific appearance, and so these characters are also not to
be affected by surrounding style changes.
</p>
      <p>
Not all combinations of character data and mathvariant values have assigned
Unicode code points.  For example, sans-serif Greek alphabets are
omitted, while bold sans-serif Greek alphabets are included, and
bold digits are included, while bold-italic digits are excluded.
A renderer should visually distinguish those combinations of character data
and mathvariant attribute values that it can subject to the
availability of font characters.
It is intended that renderers distinghish at least those combinations
that have equivalent Unicode code points, and renderers are free to
ignore those combinations that have no assigned Unicode code point
or for which adequate font support is unavailable.
</p>
      <p>
The exact correspondence between a mathematical alphabetic character
and an unstyled character is complicated by the fact that certain
characters that were already present in Unicode in Plane 0 are not in
the 'expected' sequence in Plane 1.  The table below shows the Plane 0
mathematical alphanumeric symbols, listing for each character its
Unicode code point, its Unicode character name, its corresponding
unstyled alphabetic character, and the code point in Plane 1 where
one might naturally have sought this character.
</p>
      <p>
</p>
      <p>
Mathematical Alphanumeric Symbol characters should not be used for styled prose.
For example, Mathematical Fraktur A must not be used to just select
a blackletter font for an uppercase A as it
would create problems for searching, restyling (e.g. for accessibility), 
and many other kinds of processing.
</p>
   </section>
   <section>
      <h3 id="chars_nonmark">Non-Marking Characters</h3>
      <p>
Some characters, although important for the quality of print or
alternative rendering, do not have glyph marks that correspond
directly </p>
      <p>In MathML, control of page composition, such as line-breaking, is
effected by the use of the proper attributes on the </p>
      <p>The characters below are not simple spacers.  They are
especially important new additions to the UCS because they provide
textual clues which can increase the quality of print rendering,
permit correct audio rendering, and allow the unique recovery of
mathematical semantics from text which is visually ambiguous.
</p>
      <p>
</p>
   </section>
   <section>
      <h3 id="chars_anomalous">Anomalous Mathematical Characters</h3>
      <p>Some characters which occur fairly often in mathematical texts, and
have special significance there, are frequently confused with other
similar characters in the UCS.  In some cases, common keyboard
characters have become entrenched as alternatives to the more appropriate
mathematical characters.  In others, characters have legitimate uses in
both formulas and text, but conflicting rendering and font
conventions. All these characters are called here anomalous
characters.</p>
      <section>
         <h4 id="chars_keyboard">Keyboard Characters</h4>
         <p>Typical Latin-1-based keyboards contain several characters that
are visually similar to important mathematical characters.
Consequently, these characters are frequently substituted,
intentionally or unintentionally, for their more correct mathematical
counterparts.</p>
         <section>
            <h5 id="chars_hyph-minus">Minus</h5>
            <p>The most common ordinary text character which enjoys a special
mathematical use is U+002D [HYPHEN-MINUS].  As its Unicode name
suggests, it is used as a hyphen in prose contexts, and as a minus
or negative sign in formulas.
For text use, there is a specific code point U+2010 [HYPHEN] which is
intended for prose contexts, and which should render as a hyphen or
short dash.
For mathematical use, there is another code point U+2212 [MINUS SIGN]
which is intended for mathematical formulas, and which should render
as a longer minus or negative sign.
MathML renderers should treat U+002D [HYPHEN-MINUS] as equivalent to
U+2212 [MINUS SIGN] in formula contexts such as </p>
         </section>
         <section>
            <h5 id="chars_prime-quote">Apostrophes, Quotes and Primes</h5>
            <p>On a typical European keyboard there is a key available which is
viewed as an apostrophe or a single quotation mark (an upright or
right quotation mark).  Thus one key is doing double duty for prose
input to enter U+0027 [APOSTROPHE] and U+2019 [RIGHT SINGLE QUOTATION
MARK].  In mathematical contexts it is also commonly used for the
prime, which should be U+2032 [PRIME].  Unicode recognizes the
overloading of this symbol and remarks that it can also signify the
units of minutes or feet.  In the unstructured printed text of normal
prose the characters are placed next to one another.  The U+0027
[APOSTROPHE] and U+2019 [RIGHT SINGLE QUOTATION MARK] are marked with
glyphs that are small and raised with respect to the center line of
the text.  The fonts used provide small raised glyphs in the
appropriate places indexed by the Unicode codes.  The U+2032 [PRIME]
of mathematics is similarly treated in fuller Unicode fonts.
</p>
            <p>MathML renderers are encouraged to treat U+0027
[APOSTROPHE] as U+2032 [PRIME] when appropriate in
formula contexts.</p>
            <p>A final remark is that a &#x2018;prime&#x2019; is often used in
transliteration of the Cyrillic character U+044C [CYRILLIC SMALL
LETTER SOFT SIGN].  This different use of primes is not part of
considerations for mathematical formulas. 
</p>
         </section>
         <section>
            <h5>Other Keyboard Substitutions</h5>
            <p>While the minus and prime characters are the most common and
important keyboard characters with more precise mathematical
counterparts, there are a number of other keyboard character
substitutions that are sometime used.  For example some may expect
</p>
         </section>
      </section>
      <section>
         <h4 id="chars_pseudo-scripts">Pseudo-scripts</h4>
         <p>There are a number of characters in the UCS that traditionally have
been taken to have a natural &#x2018;script&#x2019; aspect.  The
visual presentation of these characters is similar to a script, that
is, raised from the baseline, and smaller than the base font size.  The
degree symbol and prime characters are examples.  For use in text, such
characters occur in sequence with the identifier they follow, and are
typically rendered using the same font.  These characters are called
pseudo-scripts here.</p>
         <p>In almost all mathematical contexts, pseudo-script characters should
be associated
with a base expression using explicit script markup in MathML.  For
example, the preferred encoding of </p>
         <p>There are two reasons why explicit markup is preferable in
mathematical contexts.  First, a problem arises with typesetting, when
pseudo-scripts are used with subscripted identifiers.  Traditionally,
subscripting of x' would be rendered stacked under the prime. This is
easily accomplished with script markup, for example:

</p>
         <p>Note this means that a renderer of MathML will have to treat
pseudo-scripts differently from most other character codes it finds in
a superscript position; in most fonts, the glyphs for pseudo-scripts
are already shrunk and raised from the baseline.
</p>
         <p>The second reason that explicit script markup is preferrable to
juxtaposition of characters is that it generally better reflects the
intended mathematical structure. For example, 
</p>
         <p>However, the data model for all MathML token elements is Unicode text, 
so one cannot rule out the possibility of valid MathML markup 
containing constructions such as 
</p>
         <p>The U+2032 [PRIME] character is perhaps the most common
pseudo-script, but there are many others, as listed below:

</p>
         <p>
In addition, the characters in the Unicode Superscript and Subscript block
(beginning at U+2070) should be treated as pseudo-scripts when they
appear in mathematical formulas.
</p>
         <p>Note that several of these characters are common on keyboards,
including U+002A [ASTERISK], U+00B0 [DEGREE SIGN], U+2033 [DOUBLE PRIME],
and U+2035 [REVERSED PRIME] also known as a back prime. 
</p>
      </section>
      <section>
         <h4 id="chars_comb-chars">Combining Characters</h4>
         <p>In the UCS there are many combining characters that are intended 
to be used for the many accents of numerous different natural
languages.  Some of them may seem to provide markup needed for 
mathematical accents. They should not be used in mathematical markup.  
Superscript, subscript, underscript, and overscript constructions as
just discussed above
should be used for this purpose.  Of course, combining
characters may be used in multi-character identifiers as they are 
needed, or in text contexts.  
</p>
         <p>
There is one more case where combining characters turn up naturally
in mathematical markup.  Some relations have associated negations,
such as U+226F [NOT GREATER-THAN] for the negation of 
U+003E [GREATER-THAN SIGN].  The glyph for U+226F [NOT GREATER-THAN]
is usually just that for U+003E [GREATER-THAN SIGN] with a slash through
it.  Thus it could also be expressed by U+003E-0338 making use of
the combining slash U+0338 [COMBINING LONG SOLIDUS OVERLAY].
That is true of 25 other characters in common enough mathematical use
to merit their own Unicode code points.  In the other direction there are 
31 character entity names listed in </p>
         <p>In a similar way there are mathematical characters which have negations 
given by a vertical bar overlay U+20D2 [COMBINING LONG VERTICAL LINE OVERLAY].
Some are available in pre-composed forms, and some named character entities 
are given explicitly as combinations.  In addition there are examples
using U+0333 [COMBINING DOUBLE LOW LINE] and 
U+20E5 [COMBINING REVERSE SOLIDUS OVERLAY], and variants specified 
by use of the U+FE00 [VARIATION SELECTOR-1].  For fuller listing of
these cases see the listings in </p>
         <p>The general rule is that a base character followed by a string of
combining characters should be treated just as though it were the
pre-composed character that results from the combination,
if such a character exists.
</p>
      </section>
   </section>
</section>
